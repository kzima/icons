// import components meta data
import demo from 'src/docs/components/demo'
import search from 'src/docs/components/search'

// import vuestrap dependencies
import 'vuestrap/components/nav'
import 'vuestrap/components/navbar'
import 'vuestrap/components/buttons'
import 'vuestrap/components/list-group'
import 'vuestrap/components/jumbotron'
import 'vuestrap/components/tables'

// import other dependencies
import pkg from 'package.json'

// start docs instance
new Vue({
	el: '#docs',
	data: {
		title: 'Vuestrap Docs',
		pkg: pkg,
		search: '',
		page: null,
		components: [demo, search],
	},
	computed: {
		currentComponent() {
			let currentComponent = {meta: {options: [], name: ''}, snippet: ''}
			this.components.forEach((component) => {
				if (component.meta.name === this.page) {
					currentComponent = component
				}
			})
			return currentComponent
		}
	},
	components: {
		'demo': vuestrapDocs.demo,
		'search': vuestrapDocs.search
	},
	ready() {
		let segments = window.location.pathname.split( '/' )
		segments = segments.filter((n) => { return n !== ''})
		this.page = segments[segments.length - 1]
		this.title = this.currentComponent && this.currentComponent.meta.title ? 'Vuestrap Docs - ' + this.currentComponent.meta.title : 'Vuestrap Docs - ' + this.pkg.name
	}
})
